<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Accounts Check</title>
</head>
<body>
  <script type="text/javascript">
    // Response the id and token from sessionStorage when being asked by host
    // Note: don't redirect the host, only return values. Host should
    // decide what to do with the returned data then
    'use strict';

    var validOrigins = ['%REACT_APP_TRADE_HOST%'];
    function receiveMessage(event) {
      var origin = event.origin || event.originalEvent.origin;

      if (validOrigins.indexOf(origin) === -1) {
        return;
      }

      // Trusted source!
      event.source.postMessage({
        // id is legacy
        id: sessionStorage.getItem('tokenId'),
        tokenId: sessionStorage.getItem('tokenId'),
        token: sessionStorage.getItem('token')
      }, origin);
    }

    window.addEventListener('message', receiveMessage);
  </script>
</body>
</html>
